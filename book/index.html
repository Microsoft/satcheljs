
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Introduction Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="core-concepts.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="core-concepts.html">
            
                <a href="core-concepts.html">
            
                    
                    Core Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="middleware.html">
            
                <a href="middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="api/action.html">
            
                <a href="api/action.html">
            
                    
                    action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="api/actionCreator.html">
            
                <a href="api/actionCreator.html">
            
                    
                    actionCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="api/applyMiddleware.html">
            
                <a href="api/applyMiddleware.html">
            
                    
                    applyMiddleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="api/createStore.html">
            
                <a href="api/createStore.html">
            
                    
                    createStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="api/dispatch.html">
            
                <a href="api/dispatch.html">
            
                    
                    dispatch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="api/getRootStore.html">
            
                <a href="api/getRootStore.html">
            
                    
                    getRootStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="api/mutator.html">
            
                <a href="api/mutator.html">
            
                    
                    mutator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="api/mutatorAction.html">
            
                <a href="api/mutatorAction.html">
            
                    
                    mutatorAction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="api/orchestrator.html">
            
                <a href="api/orchestrator.html">
            
                    
                    orchestrator
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Best Practices
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="best-practices/action-creators.html">
            
                <a href="best-practices/action-creators.html">
            
                    
                    Action Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="best-practices/mutators-and-orchestrators.html">
            
                <a href="best-practices/mutators-and-orchestrators.html">
            
                    
                    Mutators and Orchestrators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="best-practices/selectors.html">
            
                <a href="best-practices/selectors.html">
            
                    
                    Selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="best-practices/mobx.html">
            
                <a href="best-practices/mobx.html">
            
                    
                    MobX
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="satchel">Satchel</h1><p>Satchel is a dataflow framework based on the <a href="http://facebook.github.io/react/blog/2014/05/06/flux.html" target="_blank">Flux architecture</a>.  It is characterized by exposing an observable state that makes view updates painless and efficient.</p><p><a href="https://travis-ci.org/Microsoft/satcheljs" target="_blank"><img alt="Build Status" src="https://travis-ci.org/Microsoft/satcheljs.svg?branch=master"></a></p><h2 id="influences">Influences</h2><p>Satchel is an attempt to synthesize the best of several dataflow patterns typically used to drive a React-based UI.  In particular:</p><ul><li><a href="http://facebook.github.io/react/blog/2014/05/06/flux.html" target="_blank">Flux</a> is not a library itself, but is a dataflow pattern conceived for use with React.  In Flux, dataflow is unidirectional, and the only way to modify state is by dispatching actions through a central dispatcher.
</li>
<li><a href="http://redux.js.org/index.html" target="_blank">Redux</a> is an implementation of Flux that consolidates stores into a single state tree and attempts to simplify state changes by making all mutations via pure functions called reducers.  Ultimately, however, we found reducers and immutable state cumbersome to deal with, particularly in a large, interconnected app.
</li>
<li><a href="http://mobxjs.github.io/mobx/index.html" target="_blank">MobX</a> provides a seamless way to make state observable, and allows React to listen to state changes and rerender in a very performant way.  Satchel uses MobX under the covers to allow React components to observe the data they depend on.
</li></ul>
<h2 id="advantages">Advantages</h2><p>There are a number of advantages to using Satchel to maintain your application state:</p><ul><li>Satchel enables a very <strong>performant UI</strong>, only rerendering the minimal amount necessary.  MobX makes UI updates very efficient by automatically detecting specifically what components need to rerender for a given state change.
</li>
<li>Satchel&apos;s datastore allows for <strong>isomorphic JavaScript</strong> by making it feasible to render on the server and then serialize and pass the application state down to the client.
</li>
<li>Satchel supports <strong>middleware</strong> that can act on each action that is dispatched.  (For example, for tracing or performance instrumentation.)
</li>
<li>Satchel is <strong>type-safe</strong> out of the box, without any extra effort on the consumer&apos;s part.
</li></ul>
<h2 id="installation">Installation</h2><p>Install via NPM:</p><p><code>npm install satcheljs --save</code></p><p>In order to use Satchel with React, you&apos;ll also need MobX and the MobX React bindings:</p><p><code>npm install mobx --save</code></p><p><code>npm install mobx-react --save</code></p><h2 id="usage">Usage</h2><p>The following examples assume you&apos;re developing in Typescript.</p><h3 id="create-a-store-with-some-initial-state">Create a store with some initial state</h3><pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { createStore } from <span class="hljs-string">&apos;satcheljs&apos;</span>;

<span class="hljs-keyword">let</span> getStore = createStore(
    <span class="hljs-string">&apos;todoStore&apos;</span>,
    { todos: [] }
);</code></pre>
<h3 id="create-a-component-that-consumes-your-state">Create a component that consumes your state</h3><p>Notice the <code>@observer</code> decorator on the component&#x2014;this is what tells MobX to rerender the component whenever the data it relies on changes.</p><pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { observer } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;mobx-react&apos;</span>;

@observer
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoListComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">any</span>, <span class="hljs-title">any</span>&gt; </span>{
    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                getStore().todos.map(todo =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{todo.text}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>)
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}</code></pre>
<h3 id="implement-an-action-creator">Implement an action creator</h3><p>Note that, as a convenience, Satchel action creators created with the <code>action</code> API both <em>create</em> and <em>dispatch</em> the action.
This is typically how you want to use action creators.
If you want to create and dispatch the actions separately you can use the <code>actionCreator</code> and <code>dispatch</code> APIs.</p><pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { action } from <span class="hljs-string">&apos;satcheljs&apos;</span>;

<span class="hljs-keyword">let</span> addTodo = action(
    <span class="hljs-string">&apos;ADD_TODO&apos;</span>,
    (text: <span class="hljs-built_in">string</span>) =&gt; ({ text: text })
);

<span class="hljs-comment">// This creates and dispatches an ADD_TODO action</span>
addTodo(<span class="hljs-string">&apos;Take out trash&apos;</span>);</code></pre>
<h3 id="implement-a-mutator">Implement a mutator</h3><p>You specify what action a mutator subscribes to by providing the corresponding action creator.
If you&apos;re using TypeScript, the type of <code>actionMessage</code> is automatically inferred.</p><pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { mutator } from <span class="hljs-string">&apos;satcheljs&apos;</span>;

mutator(addTodo, (actionMessage) =&gt; {
    getStore().todos.push({
        id: <span class="hljs-built_in">Math</span>.random(),
        text: actionMessage.text
    });
};</code></pre>
<h3 id="orchestrators">Orchestrators</h3><p>Orchestrators are like mutators&#x2014;they subscribe to actions&#x2014;but they serve a different purpose.
While mutators modify the store, orchestrators are responsible for side effects.
Side effects might include making a server call or even dispatching further actions.</p><p>The following example shows how an orchestrator can persist a value to a server before updating the store.</p><pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { action, orchestrator } from <span class="hljs-string">&apos;satcheljs&apos;</span>;

<span class="hljs-keyword">let</span> requestAddTodo = action(
    <span class="hljs-string">&apos;REQUEST_ADD_TODO&apos;</span>,
    (text: <span class="hljs-built_in">string</span>) =&gt; ({ text: text })
);

orchestrator(requestAddTodo, async (actionMessage) =&gt; {
    await addTodoOnServer(actionMessage.text);
    addTodo(actionMessage.text);
};</code></pre>
<h3 id="mutatoraction">mutatorAction</h3><p>In many cases a given action only needs to be handled by one mutator.
Satchel provides this utility API which encapsulates action creation, dispatch, and handling in one simple function call.</p><p>The <code>addTodo</code> mutator above could be implemented as follows:</p><pre><code class="lang-typescript"><span class="hljs-keyword">let</span> addTodo = mutatorAction(
    <span class="hljs-string">&apos;ADD_TODO&apos;</span>,
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTodo</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) </span>{
        getStore().todos.push({
            id: <span class="hljs-built_in">Math</span>.random(),
            text: actionMessage.text
        });
    });</code></pre>
<p>This is a succinct and easy way to write mutators, but it comes with a restriction:
the action creator is not exposed, so no <em>other</em> mutators or orchestrators can subscribe to it.
If an action needs multiple handlers then it must use the full pattern with action creators and handlers implemented separately.</p><h2 id="license---mit">License - MIT</h2>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="core-concepts.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Core Concepts">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Core Concepts","level":"1.2","depth":1,"path":"core-concepts.md","ref":"core-concepts.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"README.md","mtime":"2018-01-26T22:38:22.524Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2018-01-26T22:44:06.760Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

